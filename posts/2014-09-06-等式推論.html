<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Wright Access - ç­‰å¼æ¨è«–</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
        <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" />
        <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>
    </head>
    <body>
        <div id="header">
            <div id="logo">
             <h1 id="logomain"><a href="../">Wright Access</a></h1>
             <h2 id="sublogo">dpwright's notes on code, Japan, Japanese, and anything else</h2>
             <div id="social">
                 <a class="icon" href="http://github.com/dpwright"><i class="fa fa-github"></i></a>
                 <a class="icon" href="http://twitter.com/danielpwright"><i class="fa fa-twitter"></i>en</a>
                 <a class="icon" href="http://twitter.com/tataminomusi"><i class="fa fa-twitter"></i>jp</a>
                 <a class="icon" href="mailto:dani@dpwright.com"><i class="fa fa-envelope-o"></i></a>
                 <a class="icon" href="../atom.xml"><i class="fa fa-rss-square"></i></a>
              </div>
            </div>
            <div id="navigation">
                <a href="../tags/functional-programming.html">Î»</a>
                <a href="../tags/git.html"><i class="fa fa-code-fork"></i></a>
                <a id="vim-icon" href="../tags/vim.html">:w</a>
                <span id="jp-icon"><a href="../tags/æ—¥æœ¬èª.html">æ—¥</a></span>
                <a href="../pages/about.html"><i class="fa fa-question-circle"></i></a>
            </div>
        </div>

        <div id="content">
            <h1 class="title">ç­‰å¼æ¨è«–</h1>

            <div class="info"> 6 September, 2014</div>



<h2 id="è‡ªå·±ç´¹ä»‹">è‡ªå·±ç´¹ä»‹</h2>
<ul>
<li><i class="fa fa-twitter"></i> <a href="http://twitter.com/tataminomusi">@tataminomusi</a> ï¼ˆæ—¥æœ¬èªï¼‰</li>
<li><i class="fa fa-twitter"></i> <a href="http://twitter.com/danielpwright">@danielpwright</a> ï¼ˆè‹±èªï¼‰</li>
<li><i class="fa fa-github"></i> <a href="http://github.com/dpwright">dpwright</a></li>
<li>äº¬éƒ½ã®ã‚²ãƒ¼ãƒ ä¼šç¤¾ã€VITEIã®ãƒªãƒ¼ãƒ‰ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼</li>
<li>åŸºæœ¬çš„ã«C++ã€ã§ã‚‚ãƒ„ãƒ¼ãƒ«ç­‰ã¯å¤šè¨€èª
<ul>
<li>ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã¯Rubyã¨Ninja</li>
<li>Mayaãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯Python</li>
<li>ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¯Haskell</li>
<li>C#ã®ãƒ„ãƒ¼ãƒ«ã‚‚ã‚ã‚Šã¾ã™</li>
</ul></li>
<li>ãƒ›ãƒ³ãƒˆã¯Haskellã§ã‚²ãƒ¼ãƒ ã‚’ä½œã£ã¦ã¿ãŸã„ã‘ã©ã¾ã ã¾ã é›£ã—ã„</li>
</ul>
<h2 id="ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³">ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³</h2>
<p>. . .</p>
<h3 id="ã©ã®è¨€èªã«å‘ã„ã¦ã‚‹">ã©ã®è¨€èªã«å‘ã„ã¦ã‚‹ï¼Ÿ</h3>
<ul>
<li>ğŸ’– Haskell ğŸ’•</li>
<li>ä¾å­˜å‹è¨€èªï¼šAgda, Idris, Coqâ€¦</li>
<li>MLç³»ï¼šSML, Ocaml, F#â€¦</li>
<li>Scalaï¼Ÿ</li>
<li>Lispç³»ï¼Ÿ</li>
<li>C++/Java/Pascal/BASICâ€¦?!</li>
</ul>
<div class="notes">
<p>å¤§äº‹ãªæ©Ÿèƒ½ã¯ï¼š</p>
<ul>
<li>å‚ç…§é€éæ€§</li>
<li>ç½®æ›ãƒ¢ãƒ‡ãƒ«</li>
<li>ç´”ç²‹é–¢æ•°</li>
<li>ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹</li>
</ul>
</div>
<h3 id="ã©ã®ãƒ¬ãƒ™ãƒ«">ã©ã®ãƒ¬ãƒ™ãƒ«ï¼Ÿ</h3>
<h2 id="æ–‡èŠ¸çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°">æ–‡èŠ¸çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</h2>
<p>ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰è‡ªä½“ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦å®Ÿè¡Œã§ãã‚‹ï¼</p>
<p>. . .</p>
<p>Haskellã®åŸºæœ¬é–¢æ•°ã‚’å†å®šç¾©ã™ã‚‹ã¤ã‚‚ã‚Šãªã‚“ã§ã€ã¨ã‚Šã‚ãˆãšéš ã•ãªã„ã¨</p>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Prelude</span> <span class="kw">hiding</span> (sum, foldr, sequence_, replicate, take, repeat)</code></pre>
<h2 id="ç­‰å¼æ¨è«–" class="titlepage">ç­‰å¼æ¨è«–</h2>
<p>. . .</p>
<h3 id="ã¯ã„ã£ãŸã„ä½•ã§ã™ã‹">ã¯ã€ã„ã£ãŸã„ä½•ã§ã™ã‹ï¼Ÿï¼</h3>
<h2 id="ä¾‹å¤‰æ•°ç½®æ›">ä¾‹ã€€å¤‰æ•°ç½®æ›</h2>
<p>åŸºæœ¬çš„ã«ã€ä¸­å­¦æ ¡ã§ä»£æ•°å­¦ã‚’å‹‰å¼·ã—ãŸã¨ãã®å¤‰æ•°ç½®æ›ã¨è¿‘ã„</p>
<p>. . .</p>
<p><span class="math">\[
\begin{align}
x &amp;= 49       \\
y &amp;= x + 1000 \\
              \\
y &amp;= 1049
\end{align}
\]</span></p>
<h2 id="ä¾‹é€£ç«‹æ–¹ç¨‹å¼">ä¾‹ã€€é€£ç«‹æ–¹ç¨‹å¼</h2>
<p><span class="math">\[
\begin{align}
2x + y &amp;= 4 \\
x - y  &amp;= -1
\end{align}
\]</span></p>
<p>æ–¹ç¨‹å¼ã‚’çµ„ã¿æ›¿ãˆãŸã‚‰åŒã˜æ–¹æ³•ã§è§£ã‘ã¾ã™</p>
<p>. . .</p>
<p><span class="math">\[
\begin{align}
y &amp;= 4 - 2x \\
x &amp;= y - 1
\end{align}
\]</span></p>
<h2 id="ä¾‹é€£ç«‹æ–¹ç¨‹å¼-1">ä¾‹ã€€é€£ç«‹æ–¹ç¨‹å¼</h2>
<table>
<colgroup>
<col width="30%" />
<col width="30%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><p><span class="math">\[
\begin{align}
x  &amp;= y - 1        \\
   &amp;= (4 - 2x) - 1 \\
   &amp;= 3 - 2x       \\
3x &amp;= 3            \\
x  &amp;= 1            \\
\end{align}
\]</span></p></td>
<td align="left"><p><span class="math">\[
\begin{align}
y  &amp;= 4 - 2x       \\
   &amp;= 4 - 2(y - 1) \\
   &amp;= 4 - 2y + 2   \\
3y &amp;= 6            \\
y  &amp;= 2
\end{align}
\]</span></p></td>
</tr>
</tbody>
</table>
<h2 id="ä¾‹æ•°å­¦çš„è¨¼æ˜">ä¾‹ã€€æ•°å­¦çš„è¨¼æ˜</h2>
<p>ã€Œé»„é‡‘æ•°ã€ã¨å‘¼ã°ã‚Œã‚‹ã€€<span class="math">\(\phi = \frac{1 + \sqrt{5}}{2}\)</span></p>
<p><span class="math">\(\phi^2 = \phi + 1\)</span>ã€€ã‚’è¨¼æ˜ã›ã‚ˆ</p>
<h2 id="ä¾‹æ•°å­¦çš„è¨¼æ˜-1">ä¾‹ã€€æ•°å­¦çš„è¨¼æ˜</h2>
<p><span class="math">\[
\begin{align}
\phi^2 &amp;= \frac{1 + \sqrt{5}}{2} \times \frac{1 + \sqrt{5}}{2} \\
       &amp;= \frac{(1 + \sqrt{5})(1 + \sqrt{5})}{4}               \\
       &amp;= \frac{1 + \sqrt{5} + \sqrt{5} + \sqrt{5}^2}{4}       \\
       &amp;= \frac{6 + 2(\sqrt{5})}{4}                            \\
       &amp;= \frac{3 + \sqrt{5}}{2} = \frac{2}{2} + \frac{1 + \sqrt{5}}{2} \\
       &amp;= 1 + \phi
\end{align}
\]</span></p>
<h2 id="æ•°å­¦ã¯ã‚‚ã†ãˆãˆ" class="titlepage">æ•°å­¦ã¯ã‚‚ã†ãˆãˆã€‚ã€‚ã€‚</h2>
<h3 id="ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã›ã‚ˆ">ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã›ã‚ˆï¼</h3>
<h2 id="ç°¡å˜ãªä¾‹">ç°¡å˜ãªä¾‹</h2>
<p>Haskell Reportã«ã‚ˆã‚‹ã¨ã€<code>foldr</code>ã¯ã“ã‚“ãªæ„Ÿã˜</p>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> foldr f z []     <span class="fu">=</span> z
<span class="ot">&gt;</span> foldr f z (x<span class="fu">:</span>xs) <span class="fu">=</span> f x (foldr f z xs)</code></pre>
<p><code>foldr (+) 0 [1, 2, 3, 4]</code> â‰¡ <code>1 + 2 + 3 + 4</code> ã‚’è¨¼æ˜ã—ã¦ã¿ã‚ˆ</p>
<div class="notes">
<pre class="sourceCode haskell"><code class="sourceCode haskell">foldr (<span class="fu">+</span>) <span class="dv">0</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>] <span class="fu">=</span> (<span class="fu">+</span>) <span class="dv">1</span> (foldr (<span class="fu">+</span>) <span class="dv">0</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])
                         <span class="fu">=</span> <span class="dv">1</span> <span class="fu">+</span> foldr (<span class="fu">+</span>) <span class="dv">0</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]
                         <span class="fu">=</span> <span class="dv">1</span> <span class="fu">+</span> <span class="dv">2</span> <span class="fu">+</span> foldr (<span class="fu">+</span>) <span class="dv">0</span> [<span class="dv">3</span>, <span class="dv">4</span>]
                         <span class="fu">=</span> <span class="dv">1</span> <span class="fu">+</span> <span class="dv">2</span> <span class="fu">+</span> <span class="dv">3</span> <span class="fu">+</span> foldr (<span class="fu">+</span>) <span class="dv">0</span> [<span class="dv">4</span>]
                         <span class="fu">=</span> <span class="dv">1</span> <span class="fu">+</span> <span class="dv">2</span> <span class="fu">+</span> <span class="dv">3</span> <span class="fu">+</span> <span class="dv">4</span> <span class="fu">+</span> foldr (<span class="fu">+</span>) <span class="dv">0</span> []
                         <span class="fu">=</span> <span class="dv">1</span> <span class="fu">+</span> <span class="dv">2</span> <span class="fu">+</span> <span class="dv">3</span> <span class="fu">+</span> <span class="dv">4</span> <span class="fu">+</span> <span class="dv">0</span>
                         <span class="fu">=</span> <span class="dv">1</span> <span class="fu">+</span> <span class="dv">2</span> <span class="fu">+</span> <span class="dv">3</span> <span class="fu">+</span> <span class="dv">4</span></code></pre>
</div>
<h2 id="ã‚‚ã£ã¨ä¸€èˆ¬çš„ã«">ã‚‚ã£ã¨ä¸€èˆ¬çš„ã«</h2>
<p><code>sum</code>ã¨<code>foldr (+) 0</code>ã®ç­‰ã—ã•ã‚’è¨¼æ˜ã—ã‚ˆã†</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">foldr f z []     <span class="fu">=</span> z
foldr f z (x<span class="fu">:</span>xs) <span class="fu">=</span> f x (foldr f z xs)</code></pre>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> sum []           <span class="fu">=</span> <span class="dv">0</span>
<span class="ot">&gt;</span> sum (x<span class="fu">:</span>xs)       <span class="fu">=</span> x <span class="fu">+</span> sum xs</code></pre>
<p>. . .</p>
<p>ã‚„ã‚Šæ–¹ã¯å¸°ç´æ³•è¨¼æ˜ã¿ãŸã„ãªæ„Ÿã˜ã«ãªã‚‹</p>
<div class="notes">
<pre class="sourceCode haskell"><code class="sourceCode haskell">foldr f <span class="dv">0</span> []     <span class="fu">=</span> <span class="dv">0</span>
                 <span class="fu">=</span> sum []

foldr f <span class="dv">0</span> (x<span class="fu">:</span>xs)   <span class="fu">=</span> f x (foldr f <span class="dv">0</span> xs)
foldr (<span class="fu">+</span>) <span class="dv">0</span> (x<span class="fu">:</span>xs) <span class="fu">=</span> x <span class="fu">+</span> (foldr (<span class="fu">+</span>) <span class="dv">0</span> (x<span class="fu">:</span>xs))
                   <span class="fu">=</span> x <span class="fu">+</span> sum xs
                   <span class="fu">=</span> sum (x<span class="fu">:</span>xs)</code></pre>
</div>
<h2 id="ã‚‚ã£ã¨ã‚‚ã£ã¨ä¸€èˆ¬çš„ã«">ã‚‚ã£ã¨ã‚‚ã£ã¨ä¸€èˆ¬çš„ã«</h2>
<p>ãƒªã‚¹ãƒˆã¯ä¸‹è¨˜ã®ã‚ˆã†ã«è€ƒãˆã‚‰ã‚Œã‚‹</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>] â‰¡ <span class="dv">1</span> <span class="fu">:</span> <span class="dv">2</span> <span class="fu">:</span> <span class="dv">3</span> <span class="fu">:</span> <span class="dv">4</span> <span class="fu">:</span> []</code></pre>
<ul>
<li><code>[]</code> ã¯ç©ºãƒªã‚¹ãƒˆ</li>
<li><code>(:)</code> ï¼ˆã‚³ãƒ³ã‚ºï¼‰ã¯ãƒªã‚¹ãƒˆã®å…ˆé ­ã«è¿½åŠ ã™ã‚‹é–¢æ•°</li>
</ul>
<p>. . .</p>
<p>å®Ÿã¯<code>foldr</code>ã¯ã€<code>(:)</code>ã«<code>f</code>ã¨<code>[]</code>ã«<code>z</code>ã‚’äº¤æ›ã™ã‚‹ã‚‚ã®ã ï¼</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">foldr  f  z (<span class="dv">1</span><span class="fu">:</span><span class="dv">2</span><span class="fu">:</span><span class="dv">3</span><span class="fu">:</span><span class="dv">4</span><span class="fu">:</span>[])  <span class="fu">=</span> <span class="dv">1</span> <span class="ot">`f`</span> <span class="dv">2</span> <span class="ot">`f`</span> <span class="dv">3</span> <span class="ot">`f`</span> <span class="dv">4</span> <span class="ot">`f`</span> z
foldr (<span class="fu">+</span>) <span class="dv">0</span> (<span class="dv">1</span><span class="fu">:</span><span class="dv">2</span><span class="fu">:</span><span class="dv">3</span><span class="fu">:</span><span class="dv">4</span><span class="fu">:</span>[])  <span class="fu">=</span> <span class="dv">1</span> <span class="fu">+</span> <span class="dv">2</span> <span class="fu">+</span> <span class="dv">3</span> <span class="fu">+</span> <span class="dv">4</span> <span class="fu">+</span> <span class="dv">0</span>
foldr (<span class="fu">*</span>) <span class="dv">1</span> (<span class="dv">1</span><span class="fu">:</span><span class="dv">2</span><span class="fu">:</span><span class="dv">3</span><span class="fu">:</span><span class="dv">4</span><span class="fu">:</span>[])  <span class="fu">=</span> <span class="dv">1</span> <span class="fu">*</span> <span class="dv">2</span> <span class="fu">*</span> <span class="dv">3</span> <span class="fu">*</span> <span class="dv">4</span> <span class="fu">*</span> <span class="dv">1</span>
foldr (<span class="fu">:</span>) [] (<span class="dv">1</span><span class="fu">:</span><span class="dv">2</span><span class="fu">:</span><span class="dv">3</span><span class="fu">:</span><span class="dv">4</span><span class="fu">:</span>[]) <span class="fu">=</span> <span class="dv">1</span> <span class="fu">:</span> <span class="dv">2</span> <span class="fu">:</span> <span class="dv">3</span> <span class="fu">:</span> <span class="dv">4</span> <span class="fu">:</span> []
  <span class="co">-- âˆ´ foldr (:) [] â‰¡ id</span></code></pre>
<p>è¨¼æ˜ã¯ï¼Ÿ</p>
<p>è¨¼æ˜ã¯å®šç¾©ã«ã‚ˆã‚‹</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">foldr f z []     <span class="fu">=</span> z                    <span class="co">-- `[]`ã¨`z`ã®äº¤æ›</span>
foldr f z (x<span class="fu">:</span>xs) <span class="fu">=</span> x <span class="ot">`f`</span> (foldr f z xs) <span class="co">-- `(:)`ã¨`f`ã®äº¤æ›</span></code></pre>
<h2 id="å‘½ä»¤çš„ãªã‚³ãƒ¼ãƒ‰ã§ã‚‚ä½¿ãˆã‚‹">å‘½ä»¤çš„ãªã‚³ãƒ¼ãƒ‰ã§ã‚‚ä½¿ãˆã‚‹</h2>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> main <span class="fu">=</span> <span class="kw">do</span>
<span class="ot">&gt;</span>   putStrLn <span class="st">&quot;What is your name?&quot;</span>
<span class="ot">&gt;</span>   name <span class="ot">&lt;-</span> getLine
<span class="ot">&gt;</span>   replicateM_ <span class="dv">3</span> <span class="fu">$</span> putStrLn (<span class="st">&quot;Hello &quot;</span> <span class="fu">++</span> name)</code></pre>
<p>. . .</p>
<p>doè¨˜æ³•ã‹ã‚‰ç¿»è¨³ã™ã‚‹ã¨â€¦</p>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> main' <span class="fu">=</span>
<span class="ot">&gt;</span>   putStrLn <span class="st">&quot;What is your name?&quot;</span> <span class="fu">&gt;&gt;</span>
<span class="ot">&gt;</span>   getLine                       <span class="fu">&gt;&gt;=</span> \name <span class="ot">-&gt;</span>
<span class="ot">&gt;</span>   replicateM_ <span class="dv">3</span> <span class="fu">$</span> putStrLn (<span class="st">&quot;Hello &quot;</span> <span class="fu">++</span> name)</code></pre>
<p>å‡ºåŠ›ã¯æœ¬å½“ã«ï¼“å›å‡ºã‚‹ã‹ï¼Ÿ</p>
<p>ï¼ˆã“ã®ä¾‹ã¯ <a href="http://www.haskellforall.com/2013/12/equational-reasoning.html" class="uri">http://www.haskellforall.com/2013/12/equational-reasoning.html</a> ã«ã‚ˆã‚‹ï¼‰</p>
<h2 id="ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å‚ç…§">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å‚ç…§</h2>
<div class="notes">
<p>ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯å‡ºæ¥ã‚‹ã ã‘Haskell Reportã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚ ãŸã ã€Haskell Reportã«å…¥ã£ã¦ã„ãªã„å ´åˆã‚‚ã‚ã‚‹ã€‚<code>replicateM_</code>ã¯ãã®ä¸€ã¤ã€‚ æ¤œç´¢ã™ã‚‹æ–¹æ³•ã¯è‰²ã€…ã‚ã‚‹ã€ä¾‹ãˆã°ã€‚ã€‚ã€‚</p>
</div>
<ul>
<li>Haskell Report Standard Prelude <a href="http://www.haskell.org/onlinereport/standard-prelude.html" class="uri">http://www.haskell.org/onlinereport/standard-prelude.html</a></li>
<li>Hoogle <a href="http://www.haskell.org/hoogle/" class="uri">http://www.haskell.org/hoogle/</a></li>
<li>Hayoo <a href="http://hayoo.fh-wedel.de" class="uri">http://hayoo.fh-wedel.de</a></li>
<li>Googleã§â€œhackage <é–¢æ•°å>â€ã‚’æ¤œç´¢ã—ã¦ã¿ã‚‹</li>
</ul>
<p>. . .</p>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> replicateM_ n x <span class="fu">=</span> sequence_ (replicate n x)</code></pre>
<h2 id="sequence_ã‚’èª¿ã¹ã‚‹ã¨"><code>sequence_</code>ã‚’èª¿ã¹ã‚‹ã¨</h2>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> sequence_ ms <span class="fu">=</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) ms</code></pre>
<p><code>foldr</code>ã§ãŸãƒ¼ãƒ¼ï¼</p>
<p>. . .</p>
<p>ç½®æ›ã—ã¦ã¿ã‚ˆ</p>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> replicateM_' n x <span class="fu">=</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) (replicate n x)</code></pre>
<p><code>foldr</code>ã¯ã‚‚ã†ã‚ˆãåˆ†ã‹ã£ã¦ã„ã‚‹ã®ã§ã€<code>replicate</code>ã®æ–¹ã‚’ã¿ã¦ã¿ã‚ˆã†</p>
<h2 id="replicateã¨ã¯"><code>replicate</code>ã¨ã¯</h2>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> replicate n x          <span class="fu">=</span> take n (repeat x)</code></pre>
<p>. . .</p>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> take n _      <span class="fu">|</span> n <span class="fu">&lt;=</span> <span class="dv">0</span> <span class="fu">=</span> []
<span class="ot">&gt;</span> take _ []              <span class="fu">=</span> []
<span class="ot">&gt;</span> take n (x<span class="fu">:</span>xs)          <span class="fu">=</span> x <span class="fu">:</span> take (n<span class="fu">-</span><span class="dv">1</span>) xs</code></pre>
<p>. . .</p>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> repeat x               <span class="fu">=</span> xs <span class="kw">where</span> xs <span class="fu">=</span> x<span class="fu">:</span>xs</code></pre>
<p><code>n</code>ã®å€¤ã‚’çŸ¥ã‚‰ãªã„ã¨<code>take</code>ã®ç½®æ›ã§ããªã„ã®ã§ã€<code>3</code>ã‚’å…¥ã‚Œã‚‹</p>
<div class="notes">
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicate <span class="dv">3</span> x <span class="fu">=</span> take <span class="dv">3</span> (repeat x)
              <span class="fu">=</span> x <span class="fu">:</span> take <span class="dv">2</span> (tail (repeat x))
              <span class="fu">=</span> x <span class="fu">:</span> x <span class="fu">:</span> take <span class="dv">1</span> (tail (repeat x))
              <span class="fu">=</span> x <span class="fu">:</span> x <span class="fu">:</span> x <span class="fu">:</span> take <span class="dv">0</span> (tail (repeat x))
              <span class="fu">=</span> x <span class="fu">:</span> x <span class="fu">:</span> x <span class="fu">:</span> []</code></pre>
</div>
<h2 id="å®šç¾©ã‚’åºƒã’ã‚‹">å®šç¾©ã‚’åºƒã’ã‚‹</h2>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicateM_' <span class="dv">3</span> x <span class="fu">=</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) (replicate <span class="dv">3</span> x)
replicateM_' <span class="dv">3</span> x <span class="fu">=</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) (x <span class="fu">:</span> x <span class="fu">:</span> x <span class="fu">:</span> [])</code></pre>
<ul>
<li><code>(:)</code>ã¯ã€<code>(&gt;&gt;)</code>ã«ãªã‚‹</li>
<li><code>[]</code>ã¯ã€<code>return ()</code>ã«ãªã‚‹</li>
</ul>
<p>. . .</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicateM_' <span class="dv">3</span> x <span class="fu">=</span> x <span class="fu">&gt;&gt;</span> x <span class="fu">&gt;&gt;</span> x <span class="fu">&gt;&gt;</span> return ()</code></pre>
<h2 id="xã‚’ç½®æ›ã™ã‚‹"><code>x</code>ã‚’ç½®æ›ã™ã‚‹</h2>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicateM_' <span class="dv">3</span> x <span class="fu">=</span> x <span class="fu">&gt;&gt;</span> x <span class="fu">&gt;&gt;</span> x <span class="fu">&gt;&gt;</span> return ()
  <span class="kw">where</span> x <span class="fu">=</span> putStrLn (<span class="st">&quot;Hello &quot;</span> <span class="fu">++</span> name)</code></pre>
<p>. . .</p>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> main'' <span class="fu">=</span>
<span class="ot">&gt;</span>   putStrLn <span class="st">&quot;What is your name?&quot;</span> <span class="fu">&gt;&gt;</span>
<span class="ot">&gt;</span>   getLine                       <span class="fu">&gt;&gt;=</span> \name <span class="ot">-&gt;</span>
<span class="ot">&gt;</span>   putStrLn (<span class="st">&quot;Hello &quot;</span> <span class="fu">++</span> name)   <span class="fu">&gt;&gt;</span> 
<span class="ot">&gt;</span>   putStrLn (<span class="st">&quot;Hello &quot;</span> <span class="fu">++</span> name)   <span class="fu">&gt;&gt;</span> 
<span class="ot">&gt;</span>   putStrLn (<span class="st">&quot;Hello &quot;</span> <span class="fu">++</span> name)   <span class="fu">&gt;&gt;</span> 
<span class="ot">&gt;</span>   return ()</code></pre>
<p>. . .</p>
<p>ç–²ã‚ŒãŸã€‚</p>
<h2 id="ã‚‚ã£ã¨ä¸€èˆ¬çš„ã«ã§ãã‚‹">ã‚‚ã£ã¨ä¸€èˆ¬çš„ã«ã§ãã‚‹ï¼Ÿ</h2>
<blockquote>
<code>n</code>ã®å€¤ã‚’çŸ¥ã‚‰ãªã„ã¨<code>take</code>ã®ç½®æ›ã§ããªã„ã®ã§ã€<code>3</code>ã‚’å…¥ã‚Œã‚‹
</blockquote>
<p>ã¨æ›¸ãã¨ã‚¤ãƒ©ã£ã¨ã™ã‚‹ã€‚</p>
<p>ã¾ãŸã€ä»Šã®è¨¼æ˜ã¯<code>3</code>ã®å€¤ã¨ã—ã‹è¨¼æ˜ã§ãã¦ãªã„ã€‚ <code>4</code>ã‚’å…¥ã‚Œã‚‹ã¨ã¾ãŸè¨¼æ˜ãŒå¿…è¦ã€‚</p>
<p>ã‚‚ã£ã¨ã„ã„æ–¹æ³•ã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<h2 id="æ•°å­¦çš„æ³•å‰‡">æ•°å­¦çš„æ³•å‰‡</h2>
<p>æ•°å­¦ã§ã¯ã€åˆ†é…æ³•å‰‡ã¨ã„ã†æ³•å‰‡ãŒã‚ã‚‹ã€‚</p>
<p><span class="math">\[
\begin{align}
a \times (b + c) &amp;= a \times b + a \times c \\
(a \times b) + c &amp;= a \times c + b \times c
\end{align}
\]</span></p>
<p>. . .</p>
<p><code>replicateM_</code> ã«ä¼¼ãŸã‚ˆã†ãªæ³•å‰‡ã‚’è¨¼æ˜ã§ããŸã‚‰ã€ ä½•ã®æ•°å­—ã‚’å…¥ã‚Œã¦ã‚‚ã€æ–¹ç¨‹å¼ã‚’ã€Œï¼‘ã€ã«ã¤ã„ã¦æ›¸ãç›´ã›ã‚‹ã€‚</p>
<p>. . .</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicateM_ <span class="dv">0</span>       x <span class="fu">=</span> return ()                          <span class="co">-- å’Œ</span>
replicateM_ (m <span class="fu">+</span> n) x <span class="fu">=</span> replicateM_ m x <span class="fu">&gt;&gt;</span> replicateM_ n x
replicateM_ <span class="dv">1</span>         <span class="fu">=</span> id                                 <span class="co">-- ç©</span>
replicateM_ (m <span class="fu">*</span> n)   <span class="fu">=</span> replicateM_ m <span class="fu">.</span> replicateM_ n</code></pre>
<p>. . .</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicateM_ <span class="dv">3</span> x <span class="fu">=</span> replicateM_ (<span class="dv">1</span> <span class="fu">+</span> <span class="dv">1</span> <span class="fu">+</span> <span class="dv">1</span> <span class="fu">+</span> <span class="dv">0</span>) x
                <span class="fu">=</span> replicateM_ <span class="dv">1</span> x <span class="fu">&gt;&gt;</span> replicateM_ <span class="dv">1</span> x <span class="fu">&gt;&gt;</span> replicateM_ <span class="dv">1</span> x <span class="fu">&gt;&gt;</span> return ()
                <span class="fu">=</span> x <span class="fu">&gt;&gt;</span> x <span class="fu">&gt;&gt;</span> x <span class="fu">&gt;&gt;</span> return ()
  <span class="kw">where</span> x <span class="fu">=</span> putStrLn (<span class="st">&quot;Hello &quot;</span> <span class="fu">++</span> name)</code></pre>
<p>ã©ã†ã‚„ã£ã¦è¨¼æ˜ã™ã‚‹ï¼Ÿ</p>
<div class="notes">
<p>The non-pointfree version of <code>replicateM_</code> distribution over multiplication is:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicateM_ <span class="dv">1</span>       x <span class="fu">=</span> x
replicateM_ (m <span class="fu">*</span> n) x <span class="fu">=</span> replicateM_ m (replicateM_ n x)</code></pre>
</div>
<h2 id="ä¾¿åˆ©ãªæ³•å‰‡ã‚’æ¢ã™">ä¾¿åˆ©ãªæ³•å‰‡ã‚’æ¢ã™</h2>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicateM_ n x <span class="fu">=</span> sequence_ (replicate n x)</code></pre>
<p>ã“ã®æ–¹ç¨‹å¼ã‚’è¦‹ã‚‹ã¨ã€åˆ†é…æ³•å‰‡ã‚’è¨¼æ˜ã™ã‚‹æ–¹æ³•ã¯æ˜ã‚‰ã‹ã§ãªã„ã€‚</p>
<p>ãŸã ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°çš„ã«è€ƒãˆã‚‹ã¨å½“ãŸã‚Šå‰ã§ã—ã‚‡ã†ã€‚</p>
<p>. . .</p>
<ul>
<li><code>replicate</code> ã¯ã€ã‚ã‚‹å€¤ã‚’ãƒªã‚¹ãƒˆã«<code>x</code>å›é‡ã­ã‚‹</li>
<li><code>sequence_</code> ã¯ã€ã‚ã‚‹ãƒªã‚¹ãƒˆã‚’ãƒ¢ãƒŠãƒ‰çš„ã«é †åºã§è¡Œãˆã‚‹</li>
</ul>
<p><code>replicate</code>ã«<code>replicateM_</code>ã®ã€Œåˆ†é…æ³•å‰‡ã€ã«ä¼¼ãŸã‚ˆã†ãªæ³•å‰‡ã‚’ä½¿ã£ã¦ã€ <code>sequence_</code>ã§ãã®æ³•å‰‡ã®ã€Œé †åºåŒ–ã€ã§ãã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<div class="notes">
<p>ã¾ãã€ã§ããªã‹ã£ãŸã‚‰ãã†ã„ã†ã“ã¨ã¯è¨€ã‚ãªã„ã‹ã‚‰ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚</p>
</div>
<h2 id="ã¯ã„ã§ãã‚‹">ã¯ã„ã€ã§ãã‚‹</h2>
<p>. . .</p>
<h3 id="replicateã®åˆ†é…æ³•å‰‡"><code>replicate</code>ã®ã€Œåˆ†é…æ³•å‰‡ã€</h3>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicate <span class="dv">0</span>       x <span class="fu">=</span> []                             <span class="co">-- å’Œ</span>
replicate (m <span class="fu">+</span> n) x <span class="fu">=</span> replicate m x <span class="fu">++</span> replicate n x
replicate <span class="dv">1</span>         <span class="fu">=</span> return                         <span class="co">-- ç©</span>
replicate (m <span class="fu">*</span> n)   <span class="fu">=</span> replicate m <span class="fu">&lt;=&lt;</span> replicate n</code></pre>
<div class="notes">
<p>The non-pointfree version of <code>replicate</code> distribution over multiplication is:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicate <span class="dv">1</span>       x <span class="fu">=</span> [x]
replicate (m <span class="fu">*</span> n) x <span class="fu">=</span> concatMap (replicate m) (replicate n x)</code></pre>
</div>
<h3 id="sequence_ã®é †åºåŒ–"><code>sequence_</code>ã®ã€Œé †åºåŒ–ã€</h3>
<pre class="sourceCode haskell"><code class="sourceCode haskell">sequence_ []          <span class="fu">=</span> return ()                    <span class="co">-- é€£çµã€€â†’ã€€é †åºåˆ¶å¾¡</span>
sequence_ (xs <span class="fu">++</span> ys)  <span class="fu">=</span> sequence_ xs <span class="fu">&gt;&gt;</span> sequence_ ys
sequence_ <span class="fu">.</span> return    <span class="fu">=</span> void <span class="fu">.</span> id                    <span class="co">-- ãƒªã‚¹ãƒˆé–¢æ•°ã€€â†’ã€€æ™®é€šé–¢æ•°</span>
sequence_ <span class="fu">.</span> (f <span class="fu">&lt;=&lt;</span> g) <span class="fu">=</span> (sequence_ <span class="fu">.</span> f) <span class="fu">.</span> (sequence_ <span class="fu">.</span> g)</code></pre>
<div class="notes">
<p>The non-pointfree version of the <code>sequence_</code> lifting equations is:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">sequence_ [x] <span class="fu">=</span> x <span class="fu">&gt;&gt;</span> return ()
sequence_ (concatMap f (g x)) <span class="fu">=</span> sequence_ (f (sequence_ (g x)))</code></pre>
</div>
<h3 id="replicatem_ã®åˆ†é…æ³•å‰‡ã®è¨¼æ˜"><code>replicateM_</code>ã®ã€Œåˆ†é…æ³•å‰‡ã€ã®è¨¼æ˜</h3>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicateM_ <span class="dv">0</span>       x <span class="fu">=</span> sequence_ (replicate <span class="dv">0</span> x)
                      <span class="fu">=</span> sequence_ []
                      <span class="fu">=</span> return ()

replicateM_ (m <span class="fu">+</span> n) x <span class="fu">=</span> sequence_ (replicate (m <span class="fu">+</span> n) x)
                      <span class="fu">=</span> sequence_ (replicate m x <span class="fu">++</span> replicate n x)
                      <span class="fu">=</span> sequence_ (replicate m x) <span class="fu">&gt;&gt;</span> sequence_ (replicate n x)
                      <span class="fu">=</span> replicateM_ m x <span class="fu">&gt;&gt;</span> replicateM_ n x</code></pre>
<h2 id="å¿…è¦ãªè¨¼æ˜ãŒå¢—ãˆã¦ããŸ">å¿…è¦ãªè¨¼æ˜ãŒå¢—ãˆã¦ããŸã€€â˜¹</h2>
<p>ã“ã®æ–¹ç¨‹å¼ã¯è¨¼æ˜ã§ããŸ</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicateM_ <span class="dv">0</span>       x <span class="fu">=</span> return ()
replicateM_ (m <span class="fu">+</span> n) x <span class="fu">=</span> replicateM_ m x <span class="fu">&gt;&gt;</span> replicateM_ n x
replicateM_ <span class="dv">1</span>         <span class="fu">=</span> id
replicateM_ (m <span class="fu">*</span> n)   <span class="fu">=</span> replicateM_ m <span class="fu">.</span> replicateM_ n</code></pre>
<p>. . .</p>
<p>ãŸã ã€ãã®è¨¼æ˜ã‚’ã™ã‚‹ãŸã‚ã€ä¸‹è¨˜ã®æ³•å‰‡ã‚’ä½¿ã£ãŸ</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicate <span class="dv">0</span>       x   <span class="fu">=</span> []
replicate (m <span class="fu">+</span> n) x   <span class="fu">=</span> replicate m x <span class="fu">++</span> replicate n x
replicate <span class="dv">1</span>           <span class="fu">=</span> return
replicate (m <span class="fu">*</span> n)     <span class="fu">=</span> replicate m <span class="fu">&lt;=&lt;</span> replicate n
sequence_ []          <span class="fu">=</span> return ()
sequence_ (xs <span class="fu">++</span> ys)  <span class="fu">=</span> sequence_ xs <span class="fu">&gt;&gt;</span> sequence_ ys
sequence_ <span class="fu">.</span> return    <span class="fu">=</span> void <span class="fu">.</span> id
sequence_ <span class="fu">.</span> (f <span class="fu">&lt;=&lt;</span> g) <span class="fu">=</span> (sequence_ <span class="fu">.</span> f) <span class="fu">.</span> (sequence_ <span class="fu">.</span> g)</code></pre>
<p>ã“ã‚Œã‚‚è¨¼æ˜ã—ã‚ˆã†ã¨æ€ã£ãŸã‚‰ã€é€†ã«è¨¼æ˜ã—ãªã„ã¨ã„ã‘ãªã„æ–¹ç¨‹å¼ã¯ï¼’å€å¢—ãˆãŸï¼</p>
<div class="notes">
<p>å®Ÿã¯ãã†ã„ã†ã¨ãã‚ã‚‹ã€‚</p>
<p>ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ãã€ æŠ½è±¡åŒ–ã—ãŸã‚‰ã€è¨¼æ˜ãŒåˆ†ã‹ã‚Šã‚„ã™ããªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã—ã€ ä»–ã®è¨¼æ˜ã§ã‚‚ä½¿ãˆã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚ ã ã‘ã©ã€ é€†ã«æŠ½è±¡åŒ–ã‚’ã—ã™ãã¦ãŸã ã®ä»•äº‹ã«ãªã‚‹ã¨ãã‚‚ã‚ã‚‹ã€‚ æŠ½è±¡åŒ–ã‚’ã™ã‚‹ã¹ãã‹ã€ã—ãªã„æ–¹ãŒã„ã„ã‹ã€ ã¨ã„ã†ã®ã¯ã€è‡ªåˆ†ã§åˆ¤æ–­ã™ã‚‹ã—ã‹ãªã„ã€‚</p>
<p>å› ã«ã€Œå…¨éƒ¨è‡ªåˆ†ã§è¨¼æ˜ã—ãªãã‚ƒãƒ€ãƒ¡ã€ã¨ã¯è¨€ã‚ãªã„ã€‚ æ•°å­¦ã‚‚ãã†ã ã‘ã©ã€ ä¿¡é ¼ã§ãã‚‹äººãŒã€Œã“ã†ã„ã†æ³•å‰‡ã‚ã‚Œã‚ˆï¼ã€ã¨è¨€ã£ã¦ãã‚ŒãŸã‚‰ã€ ãã®ã¾ã¾ä½¿ã£ã¦ã‚‚ã„ã„ã€‚</p>
</div>
<div class="notes">
<h3 id="replicateã®è¨¼æ˜"><code>replicate</code>ã®è¨¼æ˜</h3>
<p>ã“ã®è¨¼æ˜ã¯ <a href="http://www.haskellforall.com/2013/12/equational-reasoning.html" class="uri">http://www.haskellforall.com/2013/12/equational-reasoning.html</a> ã«ã‚ˆã‚‹</p>
<p>è¨¼æ˜ã—ãŸã„ã“ã¨</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicate  <span class="dv">0</span>      x <span class="fu">=</span> []
replicate (m <span class="fu">+</span> n) x <span class="fu">=</span> replicate m x <span class="fu">++</span> replicate n x
replicate  <span class="dv">1</span>      x <span class="fu">=</span> [x]
replicate (m <span class="fu">*</span> n) x <span class="fu">=</span> concatMap (replicate m) (replicate n x)</code></pre>
<p>å‚è€ƒã®ãŸã‚</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">concatMap<span class="ot"> ::</span> (a <span class="ot">-&gt;</span> [b]) <span class="ot">-&gt;</span> [a] <span class="ot">-&gt;</span> [b]
concatMap f <span class="fu">=</span> foldr ((<span class="fu">++</span>) <span class="fu">.</span> f) []</code></pre>
<p>è¨¼æ˜</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">replicate <span class="dv">0</span> x       <span class="fu">=</span> take <span class="dv">0</span> (repeat x)                           <span class="co">-- replicateã®å®šç¾©</span>
                    <span class="fu">=</span> []                                          <span class="co">-- takeã®å®šç¾©</span>

replicate <span class="dv">1</span> x       <span class="fu">=</span> take <span class="dv">1</span> (repeat x)                           <span class="co">-- replicateã®å®šç¾©</span>
                    <span class="fu">=</span> take <span class="dv">1</span> (x<span class="fu">:</span>repeat x)                         <span class="co">-- repeatã®å®šç¾©</span>
                    <span class="fu">=</span> x<span class="fu">:</span>take <span class="dv">0</span> (repeat x)                         <span class="co">-- takeã®å®šç¾©</span>
                    <span class="fu">=</span> x<span class="fu">:</span>[] <span class="fu">=</span> [x]                                  <span class="co">-- takeã®å®šç¾©</span>

<span class="co">-- å’Œã€m = 0</span>
replicate (m <span class="fu">+</span> n) x <span class="fu">=</span> take (m <span class="fu">+</span> n) (repeat x)                     <span class="co">-- replicateã®å®šç¾©</span>
                    <span class="fu">=</span> take (<span class="dv">0</span> <span class="fu">+</span> n) (repeat x)                     <span class="co">-- æ¨å®šï¼š m = 0</span>
                    <span class="fu">=</span> take n (repeat x)                           <span class="co">-- 0 + n = n</span>
                    <span class="fu">=</span> [] <span class="fu">++</span> take n (repeat x)                     <span class="co">-- (++)ã®å®šç¾©ã€€ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> take <span class="dv">0</span> (repeat x) <span class="fu">++</span> take n (repeat x)      <span class="co">-- takeã®å®šç¾©ã€€ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> take m (repeat x) <span class="fu">++</span> take n (repeat x)      <span class="co">-- m = 0</span>
                    <span class="fu">=</span> replicate m x <span class="fu">++</span> replicate n x              <span class="co">-- replicateã®å®šç¾©ã€€ï¼ˆé€†ï¼‰</span>

<span class="co">-- å’Œã€m &gt; 0 (m = 1 + m' where m' &gt;= 0)</span>
replicate (m <span class="fu">+</span> n) x <span class="fu">=</span> take (m <span class="fu">+</span> n) (repeat x)                     <span class="co">-- replicateã®å®šç¾©</span>
                    <span class="fu">=</span> take (<span class="dv">1</span> <span class="fu">+</span> m' <span class="fu">+</span> n) (repeat x)                <span class="co">-- æ¨å®šï¼š m = 1 + m'</span>
                    <span class="fu">=</span> take (<span class="dv">1</span> <span class="fu">+</span> m' <span class="fu">+</span> n) (x<span class="fu">:</span>repeat x)              <span class="co">-- repeatã®å®šç¾©</span>
                    <span class="fu">=</span> x<span class="fu">:</span>take (m' <span class="fu">+</span> n) (repeat x)                  <span class="co">-- takeã®å®šç¾©</span>
                    <span class="fu">=</span> x<span class="fu">:</span>replicate (m' <span class="fu">+</span> n) x                      <span class="co">-- replicateã®å®šç¾©ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> x<span class="fu">:</span>(replicate m' x <span class="fu">++</span> replicate n x)         <span class="co">-- å¸°ç´æ³•</span>
                    <span class="fu">=</span> (x<span class="fu">:</span>replicate m' x) <span class="fu">++</span> replicate n x         <span class="co">-- (++)ã®å®šç¾©ã€€ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> (x<span class="fu">:</span>take m' (repeat x)) <span class="fu">++</span> replicate n x     <span class="co">-- replicateã®å®šç¾©</span>
                    <span class="fu">=</span> take (<span class="dv">1</span> <span class="fu">+</span> m') (repeat x) <span class="fu">++</span> replicate n x   <span class="co">-- takeã®å®šç¾©ã€€ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> replicate (<span class="dv">1</span> <span class="fu">+</span> m') x <span class="fu">++</span> replicate n x       <span class="co">-- replicateã®å®šç¾©ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> replicate m x <span class="fu">++</span> replicate n x              <span class="co">-- m = 1 + m'ï¼ˆé€†ï¼‰</span>

<span class="co">-- ç©ã€n = 0</span>
replicate (m <span class="fu">*</span> n) x <span class="fu">=</span> replicate <span class="dv">0</span> x                               <span class="co">-- æ¨å®šï¼š n = 0</span>
                    <span class="fu">=</span> []                                          <span class="co">-- replicate 0 x = []</span>
                    <span class="fu">=</span> foldr ((<span class="fu">++</span>) <span class="fu">.</span> replicate m) [] []            <span class="co">-- foldrã®å®šç¾©ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> concatMap (replicate m) []                  <span class="co">-- concatMapã®å®šç¾©ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> concatMap (replicate m) (replicate <span class="dv">0</span> x)     <span class="co">-- replicate 0 x = [] ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> concatMap (replicate m) (replicate n x)     <span class="co">-- n = 0 ï¼ˆé€†ï¼‰</span>

<span class="co">-- ç©ã€n &gt; 0 (n = 1 + n' where n' &gt;= 0)</span>
replicate (m <span class="fu">*</span> n) x <span class="fu">=</span> replicate (m <span class="fu">*</span> (<span class="dv">1</span> <span class="fu">+</span> n')) x                  <span class="co">-- æ¨å®šï¼š n = 1 + n'</span>
                    <span class="fu">=</span> replicate (m <span class="fu">+</span> m <span class="fu">*</span> n') x                    <span class="co">-- m * (1 + n') = m + m * n'</span>
                    <span class="fu">=</span> replicate m x <span class="fu">++</span> replicate (m <span class="fu">*</span> n') x       <span class="co">-- replicateã®ã€Œåˆ†é…æ³•å‰‡ã€ï¼ˆå’Œï¼‰</span>
                    <span class="fu">=</span> replicate m x <span class="fu">++</span> concatMap (replicate m) (replicate n' x)
                                                                  <span class="co">-- å¸°ç´æ³•</span>
                    <span class="fu">=</span> replicate m x <span class="fu">++</span> foldr ((<span class="fu">++</span>) <span class="fu">.</span> replicate m) [] (replicate n' x)
                                                                  <span class="co">-- concatMapã®å®šç¾©</span>
                    <span class="fu">=</span> foldr ((<span class="fu">++</span>) <span class="fu">.</span> replicate m)) [] (x<span class="fu">:</span>replicate n' x)
                                                                  <span class="co">-- foldrã®å®šç¾©ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> concatMap (replicate m) (x<span class="fu">:</span>replicate n' x)  <span class="co">-- concatMapã®å®šç¾©ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> concatMap (replicate m) (x<span class="fu">:</span>take n' (repeat x))
                                                                  <span class="co">-- replicateã®å®šç¾©</span>
                    <span class="fu">=</span> concatMap (replicate m) (take (<span class="dv">1</span> <span class="fu">+</span> n') (x<span class="fu">:</span>repeat x))
                                                                  <span class="co">-- takeã®å®šç¾©ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> concatMap (replicate m) (take n (x<span class="fu">:</span>repeat x))
                                                                  <span class="co">-- n = 1 + n' ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> concatMap (replicate m) (take n (repeat x)) <span class="co">-- repeatã®å®šç¾©ï¼ˆé€†ï¼‰</span>
                    <span class="fu">=</span> concatMap (replicate m) (replicate n x)     <span class="co">-- replicateã®å®šç¾©ï¼ˆé€†ï¼‰</span></code></pre>
<h3 id="sequence_ã®è¨¼æ˜"><code>sequence_</code>ã®è¨¼æ˜</h3>
<p>è¨¼æ˜ã—ãŸã„ã“ã¨</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">sequence_ []                  <span class="fu">=</span> return ()
sequence_ (xs <span class="fu">++</span> ys)          <span class="fu">=</span> sequence_ xs <span class="fu">&gt;&gt;</span> sequence_ ys
sequence_ [x]                 <span class="fu">=</span> x <span class="fu">&gt;&gt;</span> return ()
sequence_ (concatMap f (g x)) <span class="fu">=</span> sequence_ (f (sequence_ (g x)))</code></pre>
<p>è¨¼æ˜</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">sequence_ []  <span class="fu">=</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) [] <span class="co">-- sequence_ã®å®šç¾©</span>
              <span class="fu">=</span> return ()                 <span class="co">-- foldrã®å®šç¾© (foldr f z [] = z)</span>

sequence_ [x] <span class="fu">=</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) [x]     <span class="co">-- sequence_ã®å®šç¾©</span>
              <span class="fu">=</span> x <span class="fu">&gt;&gt;</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) [] <span class="co">-- foldrã®å®šç¾©</span>
              <span class="fu">=</span> x <span class="fu">&gt;&gt;</span> return ()                 <span class="co">-- foldrã®å®šç¾©</span>

<span class="co">-- å’Œã€xs = []</span>
sequence_ (xs <span class="fu">++</span> ys) <span class="fu">=</span> sequence_ ([] <span class="fu">++</span> ys)        <span class="co">-- æ¨å®šï¼š xs = []</span>
                     <span class="fu">=</span> sequence_ ys                <span class="co">-- (++)ã®å®šç¾©</span>
                     <span class="fu">=</span> return () <span class="fu">&gt;&gt;</span> sequence_ ys   <span class="co">-- return () &gt;&gt; m = mã€€ï¼ˆé€†ï¼‰</span>
                     <span class="fu">=</span> sequence_ [] <span class="fu">&gt;&gt;</span> sequence_ ys <span class="co">-- sequence_ [] = return ()ã€€ï¼ˆé€†ï¼‰</span>
                     <span class="fu">=</span> sequence_ xs <span class="fu">&gt;&gt;</span> sequence_ ys <span class="co">-- xs = []</span>

<span class="co">-- å’Œã€xs = x:xs' where xs' is a (possibly empty) list</span>
sequence_ (xs <span class="fu">++</span> ys) <span class="fu">=</span> sequence_ (x<span class="fu">:</span>xs' <span class="fu">++</span> ys)                        <span class="co">-- æ¨å®šï¼š xs = x:xs'</span>
                     <span class="fu">=</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) (x<span class="fu">:</span>xs' <span class="fu">++</span> ys)           <span class="co">-- sequence_ã®å®šç¾©</span>
                     <span class="fu">=</span> x <span class="fu">&gt;&gt;</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) (xs' <span class="fu">++</span> ys)        <span class="co">-- foldrã®å®šç¾©</span>
                     <span class="fu">=</span> x <span class="fu">&gt;&gt;</span> sequence_ xs' <span class="fu">&gt;&gt;</span> sequence_ ys             <span class="co">-- å¸°ç´æ³•</span>
                     <span class="fu">=</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) (x<span class="fu">:</span>xs') <span class="fu">&gt;&gt;</span> sequence_ ys <span class="co">-- foldrã®å®šç¾©ã€€ï¼ˆé€†ï¼‰</span>
                     <span class="fu">=</span> sequence_ (x<span class="fu">:</span>xs') <span class="fu">&gt;&gt;</span> sequence_ ys              <span class="co">-- sequence_ã®å®šç¾©ã€€ï¼ˆé€†ï¼‰</span>
                     <span class="fu">=</span> sequence_ xs <span class="fu">&gt;&gt;</span> sequence_ ys                   <span class="co">-- xs = x:xs'ã€€ï¼ˆé€†ï¼‰</span>


<span class="co">-- ç©ã€g x = []</span>
sequence_ (concatMap f (g x)) <span class="fu">=</span> sequence_ (foldr ((<span class="fu">++</span>) <span class="fu">.</span> f) [] (g x))  <span class="co">-- concatMapã®å®šç¾©</span>
                              <span class="fu">=</span> sequence_ (foldr ((<span class="fu">++</span>) <span class="fu">.</span> f) [] [])     <span class="co">-- æ¨å®šï¼š g x = []</span>
                              <span class="fu">=</span> sequence_ []                           <span class="co">-- foldrã®å®šç¾©</span>
                              <span class="fu">=</span> return ()                              <span class="co">-- sequence [] = return ()</span>

                              <span class="fu">=</span> sequence_ (((<span class="fu">++</span>) <span class="fu">.</span> f) [] [])
                              <span class="fu">=</span> sequence_ (f [] <span class="fu">++</span> [])
                              <span class="fu">=</span> sequence_ (f [])
                              <span class="fu">=</span> sequence_ f [x'] <span class="fu">&gt;&gt;</span> sequence_ []

<span class="co">-- ç©ã€f x = []</span>
sequence_ (concatMap f (g x)) <span class="fu">=</span> sequence_ (concat (map f (g x)))              <span class="co">-- concatMap = concat . map</span>
                              <span class="fu">=</span> sequence_ (foldr ((<span class="fu">++</span>) <span class="fu">.</span> f) [] (g x))         <span class="co">-- concatMapã®å®šç¾©</span>
                              <span class="fu">=</span> sequence_ (foldr (\a b <span class="ot">-&gt;</span> f a <span class="fu">++</span> b) [] (g x)) <span class="co">-- pointfulå¼</span>
                              <span class="fu">=</span> sequence_ (foldr (\_ b <span class="ot">-&gt;</span> [] <span class="fu">++</span> b) [] (g x))  <span class="co">-- f x = []</span>
                              <span class="fu">=</span> sequence_ []


                              <span class="fu">=</span> sequence_ (foldr (<span class="fu">++</span>) [] (foldr f [] (g x)))   <span class="co">-- foldr (f . g) x = foldr f x . foldr g x</span>


                              <span class="fu">=</span> sequence_ (concat (map f []))    <span class="co">-- g x = []</span>
                              <span class="fu">=</span> sequence_ (concat [])            <span class="co">-- mapã®å®šç¾©</span>
                              <span class="fu">=</span> sequence_ []                     <span class="co">-- concatã®å®šç¾©</span>


sequence_ (foldr ((<span class="fu">++</span>) <span class="fu">.</span> f) [] (g x))  <span class="co">-- concatMapã®å®šç¾©</span>
                              <span class="fu">=</span> sequence_ 


                              <span class="fu">=</span> sequence_ (foldr (<span class="fu">++</span>) [] (foldr f [] (g x)))   <span class="co">-- foldr (f . g) x = foldr f x . foldr g x</span>
                              <span class="fu">=</span> sequence_ (foldr (<span class="fu">++</span>) [] (foldr f [] ([x']<span class="fu">:</span>[]))) <span class="co">-- æ¨å®šï¼š g x = [x']:[]</span>
                              <span class="fu">=</span> sequence_ (foldr (<span class="fu">++</span>) [] (f [x'] []))          <span class="co">-- foldrã®å®šç¾©</span>
                              <span class="fu">=</span> sequence_ ((f [x'] []) <span class="fu">++</span> [])                  <span class="co">-- foldrã®å®šç¾©</span>
                              <span class="fu">=</span> sequence_ (f [x'] []) <span class="fu">&gt;&gt;</span> sequence_ []
                              <span class="fu">=</span> sequence_ (f [x'] []) <span class="fu">&gt;&gt;</span> return ()

å‹

<span class="ot">f ::</span> m1 () <span class="ot">-&gt;</span> [m a1]
<span class="ot">g ::</span> a     <span class="ot">-&gt;</span> [m1 ()]
<span class="ot">x ::</span> a

foldr (<span class="fu">&gt;&gt;</span>) (return ()) (f (foldr (<span class="fu">&gt;&gt;</span>) (return ()) (g x)))
sequence_ (f (foldr (<span class="fu">&gt;&gt;</span>) (return ()) (g x)))

<span class="fu">=</span> sequence_ (f (sequence_ (g x)))

sequence_ ms <span class="fu">=</span> foldr (<span class="fu">&gt;&gt;</span>) (return ()) ms
concatMap<span class="ot"> ::</span> (a <span class="ot">-&gt;</span> [b]) <span class="ot">-&gt;</span> [a] <span class="ot">-&gt;</span> [b]
concatMap f <span class="fu">=</span> foldr ((<span class="fu">++</span>) <span class="fu">.</span> f) []
map _ []     <span class="fu">=</span> []
map f (x<span class="fu">:</span>xs) <span class="fu">=</span> f x <span class="fu">:</span> map f xs</code></pre>
</div>
<h2 id="ä½•ã®ä¾¡å€¤" class="titlepage">ä½•ã®ä¾¡å€¤ï¼Ÿ</h2>
<div class="notes">
<p>å­¦æ ¡ã§ã“ã†ã„ã†äº‹ã‚’å‹‰å¼·ã—ãŸã¨ãã«ã€ã€Œã‚ã‚“ã©ãã›ã‡ã€œã€ã¨ã—ã‹æ€ã‚ãªã‹ã£ãŸã€‚ ä½•ã§ã‚ã–ã‚ã–ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ã™ã‚‹ã®ã‹ï¼Ÿ</p>
</div>
<h2 id="æ­£ç¢ºã•ã‚’è¨¼æ˜ã§ãã‚‹ã“ã¨" class="titlepage">æ­£ç¢ºã•ã‚’è¨¼æ˜ã§ãã‚‹ã“ã¨</h2>
<h3 id="ã‚ã‚‹ã„ã¯ã‚ã‚‹æ³•å‰‡ã«å¾“ã£ã¦ã„ã‚‹ã“ã¨ã‚’è¨¼æ˜ã§ãã‚‹ã“ã¨">ã‚ã‚‹ã„ã¯ã€ã‚ã‚‹æ³•å‰‡ã«å¾“ã£ã¦ã„ã‚‹ã“ã¨ã‚’è¨¼æ˜ã§ãã‚‹ã“ã¨</h3>
<h2 id="æœ€é©åŒ–ã‚’ã§ãã‚‹ã“ã¨" class="titlepage">æœ€é©åŒ–ã‚’ã§ãã‚‹ã“ã¨</h2>
<h3 id="æœ€é©åŒ–ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯å…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ç­‰ã—ã„ã¨è¨¼æ˜ã™ã‚‹ã“ã¨">ï¼æœ€é©åŒ–ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯å…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ç­‰ã—ã„ã¨è¨¼æ˜ã™ã‚‹ã“ã¨</h3>
<div class="notes">
<p>è¨¼æ˜ã§ããŸã‚‰ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«è‡ªå‹•çš„ã«æœ€é©åŒ–ã‚’è¡Œãˆã‚‹ï¼</p>
</div>
<h2 id="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³" class="titlepage">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³</h2>
<h3 id="hackageã§ã¯ã‚ˆãä½¿ã‚ã‚Œã¦ã„ã‚‹">Hackageã§ã¯ã‚ˆãä½¿ã‚ã‚Œã¦ã„ã‚‹</h3>
<h2 id="é›£ã—ã„ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ç†è§£ã™ã‚‹ã“ã¨" class="titlepage">é›£ã—ã„ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ç†è§£ã™ã‚‹ã“ã¨</h2>
<h3 id="åˆ†ã‹ã‚‰ãªã„ãƒ¢ãƒŠãƒ‰ãŒã‚ã£ãŸã‚‰ç­‰å¼æ¨è«–ã‚’ã‚„ã£ã¦ã¿">åˆ†ã‹ã‚‰ãªã„ãƒ¢ãƒŠãƒ‰ãŒã‚ã£ãŸã‚‰ç­‰å¼æ¨è«–ã‚’ã‚„ã£ã¦ã¿ï¼</h3>
<h2 id="ãªã‚ŒãŸã‚‰å®Ÿã¯æ¥½ã—ã„" class="titlepage">ãªã‚ŒãŸã‚‰å®Ÿã¯æ¥½ã—ã„ï¼</h2>
<h2 id="ç­‰å¼æ¨è«–ã‚„ã£ã¦ã¿ãŸã„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã¨ã‚³ãƒ„">ç­‰å¼æ¨è«–ã‚„ã£ã¦ã¿ãŸã„ï¼ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã¨ã‚³ãƒ„</h2>
<ul>
<li>è‡ªåˆ†ã®ã‚³ãƒ¼ãƒ‰ã«ä¾¿åˆ©ãªæ³•å‰‡ã‚’æ¢ã™
<ul>
<li>ç‰¹ã«typeclass</li>
</ul></li>
<li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«æ›¸ã„ã¦ã‚ã‚‹æ–¹ç¨‹å¼ã‚’æ³•å‰‡ã¨ã—ã¦ä½¿ã†</li>
<li>ã€ŒæŠ½è±¡åŒ–ã§ãã‚‹ã‹ï¼Ÿã€ã‚’è€ƒãˆãªãŒã‚‰è¨¼æ˜ã™ã‚‹</li>
<li>è¨¼æ˜ãŒã§ããŸã‚‰ãã®æ³•å‰‡ã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«æ›¸ãï¼
<ul>
<li>è¨¼æ˜è‡ªä½“ã¯ã‚¢ãƒƒãƒ—ã—ãªãã¦ã„ã„</li>
<li>ãã‚Œã§ã‚‚ã—ãŸã„ã¨æ€ã£ãŸã‚‰ã€ã‚³ãƒ¡ãƒ³ãƒˆã‹ã€ãƒ–ãƒ­ã‚°ã«æ›¸ã„ãŸã‚‰ã„ã„ã§ã—ã‚‡ã†</li>
</ul></li>
<li>è‡ªåˆ†ã®ãƒ¢ãƒŠãƒ‰ã€ãƒ¬ãƒ³ã‚ºã€ãƒ‘ã‚¤ãƒ—ç­‰ã‚’æ›¸ãã¨ãã€æ³•å‰‡ã‚’è¨¼æ˜ã—ã‚ˆã†ï¼</li>
</ul>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<ul>
<li>Gabriel Gonzalezã•ã‚“ (Tekmo)ã€€ãŒã‚ˆãä½¿ã£ã¦ã„ã‚‹
<ul>
<li>Equational Reasoning <a href="http://www.haskellforall.com/2013/12/equational-reasoning.html" class="uri">http://www.haskellforall.com/2013/12/equational-reasoning.html</a></li>
<li>Equational Reasoning at Scale <a href="http://www.haskellforall.com/2014/07/equational-reasoning-at-scale.html" class="uri">http://www.haskellforall.com/2014/07/equational-reasoning-at-scale.html</a></li>
</ul></li>
<li>Pearls of Functional Algorithm Design, Richard Bird
<ul>
<li><a href="http://www.amazon.co.jp/Pearls-Functional-Algorithm-Design-Richard-ebook/dp/B009019VUK/ref=sr_1_1?ie=UTF8&amp;qid=1409933562&amp;sr=8-1&amp;keywords=pearls+of+functional+algorithm+design" class="uri">http://www.amazon.co.jp/Pearls-Functional-Algorithm-Design-Richard-ebook/dp/B009019VUK/ref=sr_1_1?ie=UTF8&amp;qid=1409933562&amp;sr=8-1&amp;keywords=pearls+of+functional+algorithm+design</a></li>
</ul></li>
<li>Typeclassopedia <a href="http://www.haskell.org/haskellwiki/Typeclassopedia" class="uri">http://www.haskell.org/haskellwiki/Typeclassopedia</a>
<ul>
<li>ç­‰å¼æ¨è«–ã®è©±è‡ªä½“ã¯ãªã„ã‘ã©ã€Typeclassæ³•å‰‡ã¯å…¨éƒ¨æ–¹ç¨‹å¼ã§æ›¸ã„ã¦ã¦ã€ç­‰å¼æ¨è«–ã§è¨¼æ˜ã™ã‚‹ã®ã¯ã„ã„ç·´ç¿’ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œãªã„</li>
</ul></li>
</ul>
<h2 id="çµ‚" class="titlepage">çµ‚</h2>
<p>. . .</p>
<h3 id="ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ">ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ</h3>
<div class="notes">
<h2 id="ä¾‹stateãƒ¢ãƒŠãƒ‰">ä¾‹ã€€Stateãƒ¢ãƒŠãƒ‰</h2>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> <span class="kw">newtype</span> <span class="dt">State</span> s a <span class="fu">=</span> <span class="dt">State</span> {<span class="ot"> runState ::</span> s <span class="ot">-&gt;</span> (a, s) }
<span class="ot">&gt;</span> <span class="kw">instance</span> <span class="dt">Monad</span> (<span class="dt">State</span> s) <span class="kw">where</span>
<span class="ot">&gt;</span>     return a <span class="fu">=</span> <span class="dt">State</span> <span class="fu">$</span> \s <span class="ot">-&gt;</span> (a, s)
<span class="ot">&gt;</span>     m <span class="fu">&gt;&gt;=</span> k  <span class="fu">=</span> <span class="dt">State</span> <span class="fu">$</span> \s <span class="ot">-&gt;</span> <span class="kw">let</span>
<span class="ot">&gt;</span>         (a, s') <span class="fu">=</span> runState m s
<span class="ot">&gt;</span>         <span class="kw">in</span> runState (k a) s'
<span class="ot">&gt;</span> get   <span class="fu">=</span> <span class="dt">State</span> <span class="fu">$</span> \s <span class="ot">-&gt;</span> (s, s)
<span class="ot">&gt;</span> put s <span class="fu">=</span> <span class="dt">State</span> <span class="fu">$</span> \_ <span class="ot">-&gt;</span> ((), s)</code></pre>
<pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> tick <span class="fu">=</span> <span class="kw">do</span>
<span class="ot">&gt;</span>   n <span class="ot">&lt;-</span> get
<span class="ot">&gt;</span>   put <span class="fu">$</span> n <span class="fu">+</span> <span class="dv">1</span>
<span class="ot">&gt;</span>   return n</code></pre>
<pre class="sourceCode haskell"><code class="sourceCode haskell">tick <span class="fu">=</span> get <span class="fu">&gt;&gt;=</span> \n <span class="ot">-&gt;</span> put (n <span class="fu">+</span> <span class="dv">1</span>) <span class="fu">&gt;&gt;</span> return n            <span class="co">-- doè¨˜æ³•ç¿»è¨³</span>
     <span class="fu">=</span> get <span class="fu">&gt;&gt;=</span> \n <span class="ot">-&gt;</span> put (n <span class="fu">+</span> <span class="dv">1</span>) <span class="fu">&gt;&gt;=</span> \_ <span class="ot">-&gt;</span> return n    <span class="co">-- (&gt;&gt;)ã®å®šç¾©</span>
     <span class="fu">=</span> get <span class="fu">&gt;&gt;=</span> \n <span class="ot">-&gt;</span> put (n <span class="fu">+</span> <span class="dv">1</span>) <span class="fu">&gt;&gt;=</span> \_ <span class="ot">-&gt;</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> (n, s) <span class="co">-- returnã®å®šç¾©</span>
     <span class="fu">=</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> (s, s)) <span class="fu">&gt;&gt;=</span> \n <span class="ot">-&gt;</span> put (n <span class="fu">+</span> <span class="dv">1</span>) <span class="fu">&gt;&gt;=</span> \_ <span class="ot">-&gt;</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> (n, s)) <span class="co">-- getã®å®šç¾©</span>
     <span class="fu">=</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> (s, s)) <span class="fu">&gt;&gt;=</span> \n <span class="ot">-&gt;</span> <span class="dt">State</span> (\_ <span class="ot">-&gt;</span> ((), n <span class="fu">+</span> <span class="dv">1</span>)) <span class="fu">&gt;&gt;=</span> \_ <span class="ot">-&gt;</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> (n, s)) <span class="co">-- putã®å®šç¾©</span>
     <span class="fu">=</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> <span class="kw">let</span> (a, s') <span class="fu">=</span> runState (<span class="dt">State</span> (\s <span class="ot">-&gt;</span> (s, s))) s
                    <span class="kw">in</span>  runState(\n <span class="ot">-&gt;</span> <span class="dt">State</span> (\_ <span class="ot">-&gt;</span> ((), n <span class="fu">+</span> <span class="dv">1</span>)) <span class="fu">&gt;&gt;=</span> \_ <span class="ot">-&gt;</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> (n, s)) a) s') <span class="co">-- (&gt;&gt;=)ã®å®šç¾©</span>
     <span class="fu">=</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> <span class="kw">let</span> (a, s') <span class="fu">=</span> (s, s)
                    <span class="kw">in</span> runState(\n <span class="ot">-&gt;</span> <span class="dt">State</span> (\_ <span class="ot">-&gt;</span> ((), n <span class="fu">+</span> <span class="dv">1</span>)) <span class="fu">&gt;&gt;=</span> \_ <span class="ot">-&gt;</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> (n, s)) a) s' <span class="co">-- runStateã«sã‚’é©ç”¨ã™ã‚‹</span>
     <span class="fu">=</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> runState (\n <span class="ot">-&gt;</span> <span class="dt">State</span> (\_ <span class="ot">-&gt;</span> ((), n <span class="fu">+</span> <span class="dv">1</span>)) <span class="fu">&gt;&gt;=</span> \_ <span class="ot">-&gt;</span> <span class="dt">State</span> (\s <span class="ot">-&gt;</span> (n, s)) s) s</code></pre>
</div>

<div class="tagsinfo">Tagged with: <a href="../tags/functional-programming.html">functional-programming</a>, <a href="../tags/equational-reasoning.html">equational-reasoning</a>, <a href="../tags/haskell.html">haskell</a>, <a href="../tags/talks.html">talks</a>, <a href="../tags/%E6%97%A5%E6%9C%AC%E8%AA%9E.html">æ—¥æœ¬èª</a></div>

        </div>
        <div id="footer">
            Copyright Â© 2012-2014 Daniel P. Wright.
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>.
        </div>
    </body>
</html>
